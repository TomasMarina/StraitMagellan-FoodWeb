---
output:
  pdf_document:
    latex_engine: xelatex
    keep_tex: yes
  word_document: default
# classoption: landscape
# bibliography: AMPYaganes.bib
csl: "elsevier-harvard2.csl"
documentclass: article
geometry:
- vmargin=1in
- hmargin=1in
header-includes:
- \usepackage{amsmath}
- \usepackage{pdflscape,booktabs}
- \usepackage{lscape}
- \newcommand{\blandscape}{\begin{landscape}}
- \newcommand{\elandscape}{\end{landscape}}
- \usepackage[running]{lineno}
- \linenumbers
---

# Supplementary Material for 'Marine trophic network analysis and its potential resilience in the Strait of Magellan'

The following figure and tables summarise the data we used to build the network of trophic (predator-prey) interactions, food web, for the Strait of Magellan ecosystem. Details of some results are also included.

Table 1 is the complete list of trophic interactions and references that confirm each of them.

Table 2 is the species list with details on trophic species cases (aggregated taxa) and its species-level properties (degree, closeness, betweenness, Keystone Species Index -KSI-, trophic level, and topological role).

Table 3 shows the results of the degree distribution fit of the food web.

\newpage
\blandscape

```{r tableS1, echo=FALSE, message=FALSE, warning=FALSE, results='asis'}

# Load packages
require(tidyverse)
require(knitr)
require(dplyr)
require(kableExtra)
require(pander)

# Load data
int_list <- read.csv(file = "../Data/MagellanStrait_links_24jan25.csv", header = TRUE)

# Filter interaction list
int_tbl <- int_list %>% 
  distinct(Prey, Predator, .keep_all = TRUE)

# write.csv(int_tbl, file = "../InteractionList_Magellan_tocomplete.csv")

# Table S1
pandoc.table(int_tbl %>% 
               arrange(., (Predator)) %>% 
               mutate(Prey = paste('\\tiny', Prey), Predator = paste('\\tiny', Predator), Reference = paste('\\tiny', Reference), Reference_link = paste('\\tiny', Reference_link)), 
             style="multiline", split.tables = Inf, justify = c("left","left","left","left"),
             caption = "List of predator-prey (trophic) interactions used to build the food web of the Strait of Magellan.")

```

\newpage

```{r tableS2, echo=FALSE, message=FALSE, warning=FALSE, results='asis'}

# Load data
load("../Results/Network&SpProps_19feb24.rda")
load("../Results/Modularity_14jan25.rda")

# Build species list
mod_sp <- clas.role %>% 
  dplyr::select(name, type) %>% 
  rename(TrophicSpecies=name, TopRole=type)

sp_tbl <- key_ind %>% 
  left_join(mod_sp) %>% 
  rename(Degree=TotalDegree, Btw=Between, Clo=Closeness, KSI_rank=Keystone_rank, Top_role=TopRole) %>% 
  dplyr::select(TrophicSpecies, TL, Degree, Clo, Btw, KSI_rank, Top_role)

# Table S2
pandoc.table(sp_tbl %>% arrange(., (KSI_rank)) %>%
               mutate_at(vars(TL), round, 2) %>%
               mutate_at(vars(Clo, Btw), round, 4), 
             style="multiline", split.tables = Inf, justify = c("left","center","center","center","center","center","center"),
             caption = "List of species, including  node-level properties, for the food web of the Strait of Magellan. TL: Trophic Level; Clo: Closeness; Btw: Betweenness; Top_role: Topological role, where 'hubcon' = network connector, 'modcon' = module connector, 'modhub' = module hub, and 'modspe' = module specialist; KSI_rank: Keystone Species Index ranking.")

```

\elandscape

<!-- \newpage -->

<!-- ```{r tableS3, echo=FALSE, message=FALSE, warning=FALSE, results='asis'} -->

<!-- # Load data -->
<!-- load("../Datos/analisis_datos_dic24.rda") -->

<!-- # Table S3 -->
<!-- pandoc.table(dist_fit$models %>%  -->
<!--                arrange(., (AIC)) %>%  -->
<!--                dplyr::select(AIC, BIC, family, model) %>%  -->
<!--                rename("Model"="model", "Model family"="family"), style="multiline", split.tables = Inf, justify = c("left","left","left","left"), -->
<!--              caption = "Results of the degree distribution fit. Exponential and power law model families were tested, and AIC (Akaike Information Criterion) and BIC (Bayesian Information Criterion) were used to select the best fit (i.e., lower AIC and BIC). The exponential model is the best fit.") -->

<!-- ``` -->
